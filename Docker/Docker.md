#Docker
### Docker Desktop
- MAC
- Windows
	- Hyper v
	- WSL

## Архитектура
### Docker namespace 
[[Docker namespace]]
[[Linux и друзья]]
### Docker cgroup
[[Linux cgroups]]
### Манифесты(Dockerfile/Compose)
#### **Dockerfile**
- текстовый файл, содержащий инструкции для создания образа Docker. В нем описывается шаг за шагом, как собрать контейнер, какие зависимости установить, какие файлы добавить, какие команды выполнить и что должно произойти при запуске контейнера. `Dockerfile` позволяет автоматизировать процесс создания образов и обеспечивает воспроизводимость окружений.
##### Инструкции 
[[Docker dockerfile instructions]]
##### Layers (Слои)

![[docker_layers.png]]
- Одна из важных концепций Docker,задаваемая во время создания Dockerfile
- ==Каждая добавленная инструкция== в Dockerfile(ADD,FROM,COPY,etc.) ==создает новый слой ==
- ==Каждый слой фактически представляет собой файловую систему, содержащую изменения, внесенные командой из `Dockerfile`==. Например, команда `RUN apt-get update` создаст слой, который содержит все изменения, сделанные в файловой системе в результате выполнения этой команды (например, установка пакетов).
- ==Итоговый Docker-образ — это результат применения всех слоев друг к другу==. Он включает в себя все слои, начиная с базового и заканчивая последним, созданным из последней инструкции в `Dockerfile`
- **Оптимизация слоев**
	- Соединение нескольких одинаковых слоев (Выполнение нескольких RUN команд вместе)
	- Перенос часто изменяемых слоев к концу Dockerfile для минимизации количества слоев, требующих пересборки
	- Минимизация количества файлов, использующихся в контейнере для работы приложения ( COPY . . плохая практика)
	- Использование файла `.dockerignore` для исключения ненужных для сборки файлов
#### **Docker-compose**
### Cборка
- `.dockerignore`
- Multi-stage сборка
### Dockerd(k3s/Linux)
### Аналоги
- Podman
- Rancher
- LXC