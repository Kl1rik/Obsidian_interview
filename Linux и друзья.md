---
share_link: https://share.note.sx/x9elbfg4#PeEbkBKxFItzZITksLDTJ3a+1kff6RR13/S4o9hU8ko
share_updated: 2024-06-23T16:30:32+03:00
---
#Linux
![[distro-linux-icon-min.png]]
## Отличия дистрибутивов и какие юзал
- Debian
- Fedora
- Antix
- Ubuntu
- Mint(LMDE)
**На почитать**
- OpenSUSE
- RHEL
## Файловая система
### Виды файловых систем в Linux
- **EXT4(EXT3/EXT2)**
	- ==самая стабильная== из за малого количества правок на протяжении своей разработки 
	- используется по умолчанию в большинстве дистрибутивов(Ubuntu/Debian)
	- ==Multiblock allocation,уменьшает фрагментацию по сравнению с **NTFS**==

	- не поддерживает снимки ОС
	- Не может определить повреждение данных
- **XFS**
	- Высокая скорость работы с большими файлами
	- ==Поддерживает динамическое выделение Inode==
	- Не может определить повреждение данных
    - Сложности с восстановлением данных
- **BTRFS**
	- Может определить повреждение данных
	- Одна из новых и модных файловых систем
	- ==Поддерживает снимки ос на основе би деревьев==
	- Идет по умолчанию в OpenSUSE и Fedora
	- Баги при разработке и обновлении, есть проблемы со стабильностью
- **ZFS/OPENZFS**
	- построена на дереве Меркла
	- разработан для дистрибутива Solaris
	- ==полный контроль над физ. носителями==
	- ==zfs имеет закрытый код (открытый аналог **OPENZFS**)==
- **F2FS**
	- Ориентирована на SSD и Flash
	- Разработана Samsung
	- ==Быстрее **EXT4**==
### Структура папок ФС Linux
- /bin
	- системные программы (бинарные - двоичные файлы, исполняемые файлы). Например, в каталоге /bin размещаются все основные команды ядра Linux, такие как cp, cat, mount и так далее.
- /sbin
	- размещаются важные системные исполняемые (бинарные) файлы, которые необходимы для запуска системы. Также в каталоге размещаются команды, которые обычно использует только системный администратор. Например, в каталоге /sbin размещаются команды halt и reboot.
- /proc
	- размещена так называемая псевдофайловая система - виртуальная файловая система информации о ядре и процессах.
- /sys
	- Назначение каталогов Linux из этой папки - получение информации о системе непосредственно от ядра. Это еще одна файловая система организуемая ядром и позволяющая просматривать и изменить многие параметры работы системы, например, работу swap, контролировать вентиляторы и многое другое.
- /home/user
	- Домашние каталоги пользователей. У каждого пользователя в /home есть свой определенный каталог, имя которого совпадает с именем пользователя. Например, если я в системе зарегистрирован как yuriy, то мой домашний каталог будет /home/yuriy.
- /var
	- содержит различные данные, которые обычно изменяются со временем. Например, в нем могут размещаться сохраненные данные для игр, файлы регистраций, буферы печати. В нем же хранятся файлы системных журналов (в каталоге /var/log).
- /tmp
	- В данном каталоге содержаться временные файлы, которые, как правило, удаляются автоматически. Многие программы используют данный каталог для хранения временных данных.
- /etc
	- хранятся системные файлы и конфигурации. Например, здесь хранятся такие файлы как fstab, passwd, hosts и так далее.
- /dev
	-  содержит файлы, которые представляют физические устройства компьютера. Через данные файлы осуществляется интерфейс для этих устройств. Например, /dev/sda обозначает ваш первый SATA-жесткий диск.
- /boot
	- загрузчик системы и некоторые дополнительные файлы, которые нужны для запуска Linux.
- /mnt
	- В данный каталог обычно монтируют на время дополнительные файловые системы.
- /lib
	- размещены системные библиотеки и модули ядра.
- /media 
	- В данный каталог обычно монтируются съемные носители. Для каждого устройства в каталоге /media создается отдельный каталог.
- /srv
	- содержит неизменяемые данные для сервисов ("только для чтения"), предоставляемых данной системой.
- /usr
	- В данном каталоге могут размещаться различные вспомогательные файлы (например, библиотеки), которые не требуются при загрузке системы. Каталог /usr содержит иерархию подкаталогов, например, /usr/bin, /usr/local, /usr/sbin.
## Архитектура ядра, в рот ебись она
- Ядро
	- Версии ядра 
- Загружаемые модули ядра
- /etc/sysctl
	- Позволяет динамически менять конфигурации ядра на лету
## Утилиты
-  **top(лучше bashtop)**
	- Консольный диспетчер задач с мониторингом ресурсов системы
- **uptime**
	- выводит сколько система поднята, и среднюю нагрузку за 1,5,15 минут

- **vim/less/nano**
	- Консольные файловые редакторы
	- По умолчанию идет **vim**
	- less для удобного просмотра больших файлов
- **chmod**
	- Задание прав доступа для файлов и директорий (**user group other**)
		- Пр. **600,755,777,644,400**
	- Формат пояснений (**номер  - файл / директория**)
	- 0 - нет
	- 1 - выполнение/чтение из директории
	- 2 - запись/нет
	- 3 - запись и выполнение/все, кроме списка файлов
	- 4 - чтение/чтение имен файлов
	- 5 - чтение и выполнение/доступ на чтение
	- 6 - чтение и запись/чтение имен файлов
	- 7 - все/все
- **chown**
	- Задание владельца пользователя и группы для файла
- chgrp
- useradd
- groupadd
- passwd
	- Смена пароля пользователя 
- **grep** 
	- полезный инструмент для поиска и фильтрации в выводе команд/логах
	- grep -e слово -e ""слово пробел" передача нескольких аргументов, работает как "или или"
	- grep -E "сл+во[a-z]" передача регулярки для поиска по ее шаблону
- whoami
	- выводит текущего пользователя
- shutdown
	- выключение машины
- reboot
	- перезагрузка машины
- **df**
	- df -h вывести все partitions
	- df -i вывести информацию по инодам 
- apt/pkg/yum/dnf/snap/etc.

### Базовые утилиты для работы с файлами
- ls
- pwd
- cd
	- Перемещение по директориям и дискам
	- cd ~ -- переход в директорию юзера
	- cd / -- переход к корню
	- cd ../ -- переход на уровень выше
- mkdir
	- создание директорий
- rmdir
	- удаление директорий
- rm
	- удаление файлов/директорий
- mv
	- перемещение/переименование файлов
- cp
	- копирование файлов/директорий
- cat
	- вывести содержимое файла
- tail
- echo
	- Вывести текст
- sh
- clear
	- Очистить терминал
- history
	- посмотреть историю команд 
####  man
- **wiki** по командам в частности и **unix**/**linux** в общем ,содержит такие данные по командам как :
1. **Общие команды**. Команды, используемые в командной строке.
2. **Системные вызовы**. Функции ядра, которые может вызывать программа.
3. **Библиотечные функции**. Функции, которые программы могут вызывать в библиотеках кода (в основном стандарт C).
4. **Специальные файлы**. Обычно это устройства, например те, что находятся в каталоге /dev, и их драйверы.
5. **Форматы файлов и соглашения:** форматы для файлов, таких как `passwd`, таблица `cron` и `tar`. архивные файлы.
6. **Игры** Описания команд, таких как `fortune`, которые отображают котировки из базы данных при их запуске.
7. **Разное:** описания таких вещей, как индексные дескрипторы, параметры загрузки и сам `man`.
8. **Системное администрирование**. Команды и демоны обычно зарезервированы для работы `root`.
9. **Подпрограммы ядра**. Информация, относящаяся к внутренней работе ядра. Сюда входят функциональные интерфейсы и переменные, полезные, например, для программистов, которые пишут драйверы устройств. В большинстве систем этот раздел не установлен.
- sudo(doas/su)
	- команда для выполнения команды с правами администратора, позволяет использовать root-права по необходимости без смены пользователя 
	- sudo su
- touch
	- Создание файла с нужным расширением 
### Работа с процессами
- Утилиты для работы с процессами
	- **ps**
	- **pgrep**
- kill 
### Работа с сетями
- ip
- ifconfig
- ping
  #### ssh
	- команда для безопасного и зашифрованного подключения к удаленному хосту (==по умолчанию порт 22==)
	- **f** – перевести ssh в фоновый режим;
	- **g** – разрешить удаленным машинам обращаться к локальным портам;
	- **l** – имя пользователя в системе;
	- **n** – перенаправить стандартный вывод в /dev/null;
	- **p** – порт ssh на удаленной машине;
	- **q** – не показывать сообщения об ошибках;
	- **v** – режим отладки;
	- **x** – отключить перенаправление X11;
	- **X** – включить перенаправление Х11;
	- **C** – включить сжатие.
  #### nmap
	- Инструмент для сканирования портов
    - nmap 10.0.0.0/172.0.0.* /192.168.10.1-200 сканирует айпи / подсеть /диапазон
    - nmap -sn поиск активных айпишников
    - nmap -p 80 80-20000 айпишник (отдельный порт) (список портов)
        - nmap -p "*" все порты
- wget
- curl
  #### tcpdump
	- Инструмент для анализа трафика, "консольный" **wireshark**
	- tcpdump -d/--list-interfaces        выводит список портов для анализа
	- tcpdump -i <имя_интерфейса> анализ трафика с интерфейса
	- tcpdump -v/vv/vvv подробная информация о пакетах
  ##### фильтры 
	- host 1.1.1.1
    - port 5432
	- host 120.24.1.1 and port 443
- mtr
  #### netstat
	- Инструмент для проверки открытых портов сервисов
	- Без всего выводит все порты
	- netstat -p только для программ
	- netstat -r таблицу маршрутизации
	- netstat -i имя интерфейса -- только для этого интерфейса
	- netstat -at(-au) список tcp (udp)портов
  ####  fdisk/cfdisk
	- инструмент для работы с partition 
	- 
### Утилиты для архивирования/разархивирования
- gzip
	- для одиночных файлов
- tar
	- стандартный инструмент для создания архивов
## Bash
- Запуск двух команд в терминале 
	- Поставить ; между командами
- Скрипты 
	- Поразбираться с циклами 
- />>
- & / && / ||
	- в каких комбинациях как работают
	- & -- выполнить и то и то 
	- 1&& 2 &&3 если выполняется 1 или 1 и 2 ,то 3

## **Troubleshooting**
- Inode
	- Что с ними происходит, их переполнение и решение
- Причины невозможности создать новый файл
	- Переполнение Inode
	- Недостаточно прав,ФС в режиме чтения
	- Переполнено место